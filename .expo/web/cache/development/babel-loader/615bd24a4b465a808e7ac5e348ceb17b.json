{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { useContext, useState } from \"react\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport AuthContent from \"../../components/Auth/AuthContent\";\nimport LoadingOverlay from \"../../components/UI/LoadingOverlay\";\nimport { AuthContext } from \"../../store/auth-context\";\nimport { login } from \"../../util/auth\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction LoginScreen() {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isAuthenticating = _useState2[0],\n      setIsAuthenticating = _useState2[1];\n\n  var authCtx = useContext(AuthContext);\n\n  function loginHandler(_ref) {\n    var email, password, token;\n    return _regeneratorRuntime.async(function loginHandler$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            email = _ref.email, password = _ref.password;\n            setIsAuthenticating(true);\n            _context.prev = 2;\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(login(email, password));\n\n          case 5:\n            token = _context.sent;\n            authCtx.authenticate(token);\n            _context.next = 13;\n            break;\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](2);\n            Alert.alert(\"Authentication failed!\", \"Could not log you in. Please check your credentials or try again later!\");\n            setIsAuthenticating(false);\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[2, 9]], Promise);\n  }\n\n  if (isAuthenticating) {\n    return _jsx(LoadingOverlay, {\n      message: \"Logging you in...\"\n    });\n  }\n\n  return _jsx(AuthContent, {\n    isLogin: true,\n    onAuthenticate: loginHandler\n  });\n}\n\nexport default LoginScreen;","map":{"version":3,"names":["useContext","useState","AuthContent","LoadingOverlay","AuthContext","login","LoginScreen","isAuthenticating","setIsAuthenticating","authCtx","loginHandler","email","password","token","authenticate","Alert","alert"],"sources":["C:/Users/snorr/Dropbox/4semester/ReactNative/React-Native-CBS-Mobil-App2/screens/authScreens/LoginScreen.js"],"sourcesContent":["import { useContext, useState } from \"react\";\r\nimport { Alert } from \"react-native\";\r\n\r\nimport AuthContent from \"../../components/Auth/AuthContent\";\r\nimport LoadingOverlay from \"../../components/UI/LoadingOverlay\";\r\nimport { AuthContext } from \"../../store/auth-context\";\r\nimport { login } from \"../../util/auth\";\r\n\r\nfunction LoginScreen() {\r\n  const [isAuthenticating, setIsAuthenticating] = useState(false);\r\n\r\n  const authCtx = useContext(AuthContext);\r\n\r\n  async function loginHandler({ email, password }) {\r\n    setIsAuthenticating(true);\r\n    try {\r\n      const token = await login(email, password);\r\n      authCtx.authenticate(token);\r\n    } catch (error) {\r\n      Alert.alert(\r\n        \"Authentication failed!\",\r\n        \"Could not log you in. Please check your credentials or try again later!\"\r\n      );\r\n      setIsAuthenticating(false);\r\n    }\r\n  }\r\n\r\n  if (isAuthenticating) {\r\n    return <LoadingOverlay message=\"Logging you in...\" />;\r\n  }\r\n\r\n  return <AuthContent isLogin onAuthenticate={loginHandler} />;\r\n}\r\n\r\nexport default LoginScreen;\r\n"],"mappings":";;AAAA,SAASA,UAAT,EAAqBC,QAArB,QAAqC,OAArC;;AAGA,OAAOC,WAAP;AACA,OAAOC,cAAP;AACA,SAASC,WAAT;AACA,SAASC,KAAT;;;AAEA,SAASC,WAAT,GAAuB;EACrB,gBAAgDL,QAAQ,CAAC,KAAD,CAAxD;EAAA;EAAA,IAAOM,gBAAP;EAAA,IAAyBC,mBAAzB;;EAEA,IAAMC,OAAO,GAAGT,UAAU,CAACI,WAAD,CAA1B;;EAEA,SAAeM,YAAf;IAAA;IAAA;MAAA;QAAA;UAAA;YAA8BC,KAA9B,QAA8BA,KAA9B,EAAqCC,QAArC,QAAqCA,QAArC;YACEJ,mBAAmB,CAAC,IAAD,CAAnB;YADF;YAAA;YAAA,iCAGwBH,KAAK,CAACM,KAAD,EAAQC,QAAR,CAH7B;;UAAA;YAGUC,KAHV;YAIIJ,OAAO,CAACK,YAAR,CAAqBD,KAArB;YAJJ;YAAA;;UAAA;YAAA;YAAA;YAMIE,KAAK,CAACC,KAAN,CACE,wBADF,EAEE,yEAFF;YAIAR,mBAAmB,CAAC,KAAD,CAAnB;;UAVJ;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA;;EAcA,IAAID,gBAAJ,EAAsB;IACpB,OAAO,KAAC,cAAD;MAAgB,OAAO,EAAC;IAAxB,EAAP;EACD;;EAED,OAAO,KAAC,WAAD;IAAa,OAAO,MAApB;IAAqB,cAAc,EAAEG;EAArC,EAAP;AACD;;AAED,eAAeJ,WAAf"},"metadata":{},"sourceType":"module"}